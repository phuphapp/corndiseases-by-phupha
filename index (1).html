<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏à‡∏≥‡πÅ‡∏ô‡∏Å‡πÇ‡∏£‡∏Ñ‡∏Ç‡πâ‡∏≤‡∏ß‡πÇ‡∏û‡∏î</title>

    <!-- TensorFlow + Teachable Machine -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>

    <!-- Material Design Lite -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.blue-amber.min.css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
</head>

<body>

<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">

    <!-- HEADER -->
    <header class="mdl-layout__header">
        <div class="mdl-layout__header-row">
            <span class="mdl-layout-title app-title">üåΩ ‡∏à‡∏≥‡πÅ‡∏ô‡∏Å‡πÇ‡∏£‡∏Ñ‡∏Ç‡πâ‡∏≤‡∏ß‡πÇ‡∏û‡∏î</span>

            <div class="mdl-layout-spacer"></div>
        </div>
    </header>

    <!-- DRAWER -->
    <div class="mdl-layout__drawer">
        <nav class="mdl-navigation"></nav>
    </div>

    <!-- CONTENT -->
    <main class="mdl-layout__content">
        <div class="page-content">

            <!-- Start -->
            <div style="text-align:center; margin:16px;">
                <button
                    class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored"
                    onclick="init()">
                    ‚ñ∂ Start
                </button>
            </div>

            <!-- CAMERA AREA -->
            <div id="camera-wrapper">

                <div id="webcam-container"></div>

                <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏•‡πâ‡∏≠‡∏á -->
                <button id="switchCameraBtn" onclick="switchCamera()">
                    <span class="material-icons">cameraswitch</span>
                </button>

            </div>

            <!-- RESULT -->
            <div id="label-container"></div>

            <!-- UPLOAD -->
            <div class="upload-box">
                <button class="upload-rect-btn" onclick="triggerUpload()">
                    <span class="material-icons">photo_library</span>
                    ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á
                </button>
                <input type="file" id="fileUpload" accept="image/*" hidden>
            </div>

        </div>
    </main>

</div>

<!-- App Script -->
<script src="app.js"></script>

</body>
</html>

<button onclick="captureAndFreeze()">
    üì∏ ‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û
</button>
<button onclick="resumeCamera()">üîÑ ‡∏ñ‡πà‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà</button>
<script>
    function captureAndFreeze() {
        if (mode !== "live") return; // ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÇ‡∏´‡∏°‡∏î‡∏ñ‡πà‡∏≤‡∏¢‡∏ó‡∏≠‡∏î‡∏™‡∏î

        const webcamElement = document.querySelector("#webcam-container video");
        const context = capturedCanvas.getContext("2d");
        capturedCanvas.width = webcamElement.videoWidth;
        capturedCanvas.height = webcamElement.videoHeight;
        context.drawImage(webcamElement, 0, 0, capturedCanvas.width, capturedCanvas.height);

        // ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏î‡πâ‡∏ß‡∏¢‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏ö‡πÑ‡∏î‡πâ
        webcamElement.style.display = "none";
        const imgElement = document.createElement("img");
        imgElement.src = capturedCanvas.toDataURL("image/png");
        imgElement.id = "captured-image";
        document.getElementById("webcam-container").appendChild(imgElement);

        isFrozen = true;
    }

    function resumeCamera() {
        if (!isFrozen) return;

        const webcamElement = document.querySelector("#webcam-container video");
        const imgElement = document.getElementById("captured-image");

        // ‡∏•‡∏ö‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏ö‡πÑ‡∏î‡πâ‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
        imgElement.remove();
        webcamElement.style.display = "block";

        isFrozen = false;
    }